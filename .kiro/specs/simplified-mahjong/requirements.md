# 要件定義書

## 概要

２人用の簡易５枚麻雀ゲームを実装します。通常の麻雀を大幅に簡略化し、手牌４枚から１枚引いて１枚捨て、５枚で完成形を目指すゲームです。役はリーチのみで、鳴きやドラはありません。１局勝負で点数計算もない、シンプルで分かりやすい麻雀ゲームです。

## 要件

### 要件１

**ユーザーストーリー:** プレイヤーとして、２人用の簡易麻雀ゲームを開始したい。手軽に麻雀を楽しめるようにするため。

#### 受入基準

1. ゲーム開始時、システムは各プレイヤーに４枚ずつ牌を配る
2. ゲーム開始時、システムは索子１～９（各４枚）と白發中（各４枚）の計４８枚の牌のみを使用する
3. ゲーム開始時、システムはランダムに先手プレイヤーを決定する

### 要件２

**ユーザーストーリー:** プレイヤーとして、順番に牌を引いて捨てたい。完成形に向けて手牌を整えるため。

#### 受入基準

1. プレイヤーの手番開始時、システムは自動的に山から１枚牌を引く
2. プレイヤーが牌を引いた後、システムは５枚の手牌から１枚を手動で捨てることを要求する
3. プレイヤーが牌を捨てた時、システムはその牌を捨て牌として表示する
4. プレイヤーが手番を終了した時、システムは相手プレイヤーに手番を移す
## 要件３

**ユーザーストーリー:** プレイヤーとして、リーチを宣言したい。上がりの権利を得るため。

#### 受入基準

1. プレイヤーがテンパイ状態の時、システムはリーチ宣言を許可する
2. プレイヤーがリーチを宣言した時、システムはそのプレイヤーを「リーチ状態」としてマークする
3. リーチ状態のプレイヤーの手番時、システムは自動的に牌を引く
4. リーチ状態のプレイヤーが引いた牌で上がりでない場合、システムは手動での牌捨て選択を要求する
5. リーチ状態のプレイヤーが牌を捨てる場合、システムは引いた牌以外の選択を禁止する
6. プレイヤーがリーチを宣言していない場合、システムは完成形でも上がりを認めない

### 要件４

**ユーザーストーリー:** プレイヤーとして、有効な５枚の完成形で上がりたい。ゲームに勝利するため。

#### 受入基準

1. リーチ状態のプレイヤーが引いた牌で完成形になった時、システムはツモ上がりを宣言する
2. リーチ状態のプレイヤーの待ち牌を相手が捨てた時、システムはロン上がりを許可する
3. プレイヤーが上がった時、システムは即座にゲームを終了する
4. ゲーム終了時、システムは勝者と上がり牌を表示する

### 要件５

**ユーザーストーリー:** プレイヤーとして、現在のゲーム状況を確認したい。適切な判断をするため。

#### 受入基準

1. ゲーム中、システムは各プレイヤーの手牌を表示する（相手からは見えない）
2. ゲーム中、システムは全ての捨て牌を順番に表示する
3. ゲーム中、システムは現在の手番プレイヤーを表示する
4. ゲーム中、システムは各プレイヤーのリーチ状態を表示する
5. ゲーム中、システムは残り牌数を表示する

### 要件６

**ユーザーストーリー:** プレイヤーとして、ゲームが適切に処理されることを期待する。スムーズで公平なゲーム体験のため。

#### 受入基準

1. 山が空になり誰も上がっていない時、システムは流局を宣言する
2. プレイヤーの手番時、システムは適切な制限時間を設ける
3. 無効な操作が試行された時、システムは適切なエラーメッセージを表示する
4. ゲーム終了時、システムは新しいゲームの開始オプションを提供する

### 要件７

**ユーザーストーリー:** プレイヤーとして、手番時の操作を簡素化したい。スムーズなゲーム進行のため。

#### 受入基準

1. プレイヤーの手番開始時、システムは「牌を引く」ボタンを表示せず、自動的に牌を引く
2. 通常状態のプレイヤーが牌を引いた後、システムは手動での牌捨て選択を要求する
3. リーチ状態でないプレイヤーの場合、システムは手牌の任意の牌を捨てることを許可する
4. システムは牌を捨てる操作において、常にプレイヤーの手動選択を要求する（自動捨ては禁止）