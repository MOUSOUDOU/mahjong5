# 実装計画

- [x] 1. HTML構造の更新と基本レイアウト作成





  - 既存の捨て牌エリアを新しい左右分割レイアウトに変更
  - 左側（相手）と右側（プレイヤー）の捨て牌エリアコンテナを作成
  - 基本的なFlexboxレイアウト構造を実装
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 2. CSS スタイルシステムの実装





  - 捨て牌表示用の新しいCSSクラスを追加
  - 左右分割レイアウトのスタイル定義
  - 6牌/行の制限を実現するFlexboxスタイル
  - _要件: 2.1, 2.3, 2.4, 2.5_

- [x] 3. 相手捨て牌の180度回転表示機能










  - 相手の牌に対するCSS transform（180度回転）を実装
  - 下側の行から埋まる表示順序をCSS flex-direction: column-reverseで実現
  - 回転表示の視覚的確認とテスト
  - _要件: 3.1, 3.2, 3.3, 3.5, 3.6_
-

- [x] 4. JavaScript捨て牌表示管理システム




  - DiscardDisplayManagerクラスを作成
  - 既存のdisplayDiscardedTiles関数を新しいシステムに統合
  - プレイヤーと相手の捨て牌を分離して処理する機能
  - _要件: 2.1, 2.2, 3.1, 3.2_

- [x] 5. 牌配置ロジックの実装





  - 1行6牌の制限機能を実装
  - プレイヤー側：上から下への行追加ロジック
  - 相手側：下から上への行追加ロジック（CSS column-reverseと連携）
  - _要件: 2.4, 2.5, 3.4, 3.5_

- [x] 6. ゲーム状態統合とデータフロー





  - 既存のupdateGameDisplay関数を新しい捨て牌システムと統合
  - サーバーからの捨て牌データを正しく左右に分離
  - 時系列順序の保持機能を確認
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [x] 7. レスポンシブデザインと視覚的調整





  - モバイルデバイス対応のレスポンシブレイアウト
  - 牌サイズの調整と視覚的間隔の最適化
  - 左右エリア間の視覚的分離の強化
  - _要件: 1.3, 4.4_

- [x] 8. サーバー側リーチ牌追跡機能の実装





  - Player.jsにリーチ状態とリーチ牌インデックスのプロパティを追加
  - discardTile関数にリーチ牌フラグパラメータを追加
  - declareReach関数を実装してリーチ状態を管理
  - getDiscardedTilesDisplay関数を拡張してリーチ牌情報を含める
  - _要件: 5.1, 5.2, 5.3_

- [x] 9. ゲーム状態でのリーチ情報管理





  - Game.jsのgetGameState関数を拡張してリーチ牌情報を含める
  - handleReachDeclaration関数を実装してリーチ宣言を処理
  - リーチ宣言時の捨て牌をリーチ牌としてマークする機能
  - _要件: 5.1, 5.2, 5.3_

- [x] 10. クライアント側リーチ牌表示機能





  - DiscardAreaクラスを拡張してリーチ牌データを処理
  - createTileElement関数でリーチ牌用のCSSクラスを適用
  - リーチ牌の90度回転表示機能を実装
  - 相手のリーチ牌の270度回転表示機能を実装
  - _要件: 5.1, 5.2, 5.4, 5.5_

- [x] 11. リーチ牌用CSSスタイルの実装





  - .reach-tileクラスで90度回転スタイルを定義
  - .opponent.reach-tileクラスで270度回転スタイルを定義
  - リーチ牌の横向き表示に合わせた幅・高さ調整
  - 通常の捨て牌配置ルールとの整合性を保つスタイル調整
  - _要件: 5.2, 5.3, 5.4, 5.5_

- [ ]* 12. エラーハンドリングとパフォーマンス最適化
  - データ不整合時のフォールバック処理
  - DOM操作の最適化
  - 大量捨て牌時のパフォーマンス対策
  - _要件: 全般_

- [ ]* 13. 単体テストの作成
  - DiscardDisplayManagerクラスのテスト
  - 牌配置ロジックのテスト
  - CSS回転表示のテスト
  - リーチ牌表示機能のテスト
  - _要件: 全般_